# ê¹ƒ ì €ìž¥ì†Œ ë‚´ìš© ë³´ê¸° í”„ë¡œì íŠ¸

íŠ¹ì • ì €ìž¥ì†Œì— ìžˆëŠ” md íŒŒì¼ì„ ë³¼ ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” í”„ë¡œì íŠ¸

## í´ë” êµ¬ì¡°

ðŸ“‚ src  
â”— ðŸ“‚ app  
  â”— ðŸ“‚ list  
  â”— ðŸ“‚ records  
â”— ðŸ“‚ component  

## ì„œë²„ ë° í´ë¼ì´ì–¸íŠ¸ êµ¬ì„± ìš”ì†Œë¥¼ ì–¸ì œ ì‚¬ìš©í•©ë‹ˆê¹Œ?

### ë‹¤ìŒì€ ì„œë²„ ë° í´ë¼ì´ì–¸íŠ¸ êµ¬ì„± ìš”ì†Œì˜ ë‹¤ì–‘í•œ ì‚¬ìš© ì‚¬ë¡€ì— ëŒ€í•œ ê°„ëžµí•œ ìš”ì•½ìž…ë‹ˆë‹¤

|ë­˜í•˜ê¸¸ ì›í•´?|ì„œë²„ êµ¬ì„± ìš”ì†Œ|í´ë¼ì´ì–¸íŠ¸ êµ¬ì„±ìš”ì†Œ|
|:---|:---:|:---:|
|ë°ì´í„° ê°€ì ¸ì˜¤ê¸°|âœ…|âœ–ï¸|
|ë°±ì—”ë“œ ë¦¬ì†ŒìŠ¤ì— (ì§ì ‘) ì•¡ì„¸ìŠ¤|âœ…|âœ–ï¸|
|ë¯¼ê°í•œ ì •ë³´ë¥¼ ì„œë²„ì— ë³´ê´€í•˜ì„¸ìš”(ì•¡ì„¸ìŠ¤ í† í°, API í‚¤ ë“±)|âœ…|âœ–ï¸|
|ì„œë²„ì— ëŒ€í•œ í° ì˜ì¡´ì„± ìœ ì§€ / í´ë¼ì´ì–¸íŠ¸ ì¸¡ JavaScript ê°ì†Œ|âœ…|âœ–ï¸|
|ìƒí˜¸ìž‘ìš© ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ( onClick(), onChange()ë“±) ì¶”ê°€|âœ–ï¸|âœ…|
|ìƒíƒœ ë° ìˆ˜ëª…ì£¼ê¸° íš¨ê³¼ ì‚¬ìš©( useState(), useReducer(), useEffect()ë“±)|âœ–ï¸|âœ…|
|ë¸Œë¼ìš°ì € ì „ìš© API ì‚¬ìš©|âœ–ï¸|âœ…|
|ìƒíƒœ, íš¨ê³¼ ë˜ëŠ” ë¸Œë¼ìš°ì € ì „ìš© APIì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ì‚¬ìš©ìž ì •ì˜ í›„í¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.|âœ–ï¸|âœ…|
|React í´ëž˜ìŠ¤ êµ¬ì„±ìš”ì†Œ ì‚¬ìš©|âœ–ï¸|âœ…|

### `use client`

`use client`ëŠ” Next.jsì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¡œ ë°”ê¿” í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë Œë”ë§ í•  ìˆ˜ ìžˆê²Œ ìš”ì²­í•˜ëŠ” ì§€ì‹œì–´ìž…ë‹ˆë‹¤.

ë˜í•œ ê³µì‹ë¬¸ì„œì—ëŠ” ì•„ëž˜ì™€ ê°™ì´ ë‚´ìš©ì´ ì í˜€ìžˆìŠµë‹ˆë‹¤.

> [This means that by defining a "use client" in a file, all other modules imported into it, including child components, are considered part of the client bundle.](https://nextjs.org/docs/app/building-your-application/rendering/client-components#using-client-components-in-nextjs)

í•´ë‹¹ ê¸€ìžë¥¼ ë²ˆì—­í•´ë³´ë©´ ì•„ëž˜ì™€ ê°™ì´

**íŒŒì¼ì— `"use client"`ë¥¼ ì •ì˜í•˜ë©´ í•˜ìœ„ êµ¬ì„± ìš”ì†Œë¥¼ í¬í•¨í•˜ì—¬ í•´ë‹¹ íŒŒì¼ë¡œ ê°€ì ¸ì˜¨ ë‹¤ë¥¸ ëª¨ë“  ëª¨ë“ˆì´ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ì˜ ì¼ë¶€ë¡œ ê°„ì£¼ë©ë‹ˆë‹¤.**

> ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì„ íƒì€ í”„ë¡œì íŠ¸ì˜ ë³µìž¡ì„±, í™•ìž¥ì„±, ìš”êµ¬ì‚¬í•­, ê°œì¸ ì„ í˜¸ë„ ì°¨ì´ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤.


## ì—ëŸ¬ ë°œìƒ
[](https://stackoverflow.com/questions/76903959/nextjs-typeerror-cannot-read-properties-of-null-reading-removechild-when)

## ë„ì›€ ë°›ì€ ì‚¬ì´íŠ¸
>
> [Next.js13 App Router state management](https://medium.com/@ahmedenany9812/state-management-in-next-js-13-app-router-3892a56261ce)  
> [Next.js13 êµ¬ì„± íŒ¨í„´](https://nextjs.org/docs/app/building-your-application/rendering/composition-patterns)


## ë°ì´í„° ìºì‹±

fetch ìš”ì²­ì€ ë‹¤ìŒ ê²½ìš°ì— ìºì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤:

- fetch ìš”ì²­ì— cache: 'no-store'ê°€ ì¶”ê°€ëœ ê²½ìš°: ì´ëŠ” fetch ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì´ ìºì‹œì— ì €ìž¥ë˜ì§€ ì•Šë„ë¡ ì§€ì •í•©ë‹ˆë‹¤.
- ê°œë³„ fetch ìš”ì²­ì— revalidate: 0 ì˜µì…˜ì´ ì¶”ê°€ëœ ê²½ìš°: ì´ëŠ” ìºì‹œëœ ì‘ë‹µì´ ìœ íš¨í•œì§€ í™•ì¸í•˜ì§€ ì•Šê³  í•­ìƒ ì„œë²„ì—ì„œ ìƒˆë¡œìš´ ì‘ë‹µì„ ê°€ì ¸ì˜¤ë„ë¡ ì§€ì •í•©ë‹ˆë‹¤.
- POST ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë¼ìš°í„° í•¸ë“¤ëŸ¬ ë‚´ë¶€ì˜ fetch ìš”ì²­ì¸ ê²½ìš°: POST ë©”ì„œë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ë¯€ë¡œ, ì´ëŸ¬í•œ ìš”ì²­ì€ ìºì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- í—¤ë”ë‚˜ ì¿ í‚¤ì˜ ì‚¬ìš© í›„ fetch ìš”ì²­ì´ ì´ë£¨ì–´ì§„ ê²½ìš°: í—¤ë”ë‚˜ ì¿ í‚¤ì˜ ì‚¬ìš©ì€ ìš”ì²­ì˜ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ìžˆìœ¼ë¯€ë¡œ, ì´í›„ì˜ ìš”ì²­ì€ ìºì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- const dynamic = 'force-dynamic' ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ ì˜µì…˜ì´ ì‚¬ìš©ëœ ê²½ìš°: ì´ ì˜µì…˜ì€ ë¼ìš°íŠ¸ê°€ ë™ì ìœ¼ë¡œ ì²˜ë¦¬ë˜ë„ë¡ ê°•ì œí•˜ë¯€ë¡œ, í•´ë‹¹ ë¼ìš°íŠ¸ì˜ ìš”ì²­ì€ ìºì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- fetchCache ë¼ìš°íŠ¸ ì„¸ê·¸ë¨¼íŠ¸ ì˜µì…˜ì´ ê¸°ë³¸ì ìœ¼ë¡œ ìºì‹œë¥¼ ê±´ë„ˆë›°ë„ë¡ ì„¤ì •ëœ ê²½ìš°: ì´ëŠ” í•´ë‹¹ ë¼ìš°íŠ¸ì˜ ëª¨ë“  ìš”ì²­ì´ ìºì‹œë˜ì§€ ì•Šë„ë¡ ì§€ì •í•©ë‹ˆë‹¤.
- fetch ìš”ì²­ì´ Authorization ë˜ëŠ” Cookie í—¤ë”ë¥¼ ì‚¬ìš©í•˜ê³  ì»´í¬ë„ŒíŠ¸ íŠ¸ë¦¬ì—ì„œ ê·¸ ìœ„ì— ìºì‹œë˜ì§€ ì•Šì€ ìš”ì²­ì´ ìžˆëŠ” ê²½ìš°: ì´ëŠ” ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì¸í•´, ì´ëŸ¬í•œ ìš”ì²­ì€ ìºì‹œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### ìºì‹±ì´ ë˜ê³  ìžˆì§€ ì•Šì€ ì½”ë“œ

```typescript
  const options = {
    next: { revalidate: 60 },
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Accept': 'application/json',
      'Authorization': `Bearer ${process.env.ACESS_TOKEN}`,
    },
    body: JSON.stringify({
      query: `
        query {
          viewer {
            pinnedItems(first: 10) {
              totalCount
            }
            contributionsCollection(from: "${year}" to: "${toDay}") {
              contributionCalendar {
                totalContributions
              }
            }
          }
        }`,
    }),
  }
  const response = await fetch(`${process.env.GITHUB_API}`, options)
```

> ì¶œì²˜ : [Opting out of Data Caching](https://nextjs.org/docs/app/building-your-application/data-fetching/fetching-caching-and-revalidating#opting-out-of-data-caching)

### graphqlì— ìºì‰¬
"React ìºì‹œ í•¨ìˆ˜"ì— ëŒ€í•œ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì´ í•´ì„ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:

React ìºì‹œ í•¨ìˆ˜ëŠ” í•¨ìˆ˜ì˜ ë°˜í™˜ ê°’ì„ ë©”ëª¨ì´ì œì´ì…˜(ê¸°ì–µ)í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•˜ë©´ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

fetch ìš”ì²­ì€ ìžë™ìœ¼ë¡œ ë©”ëª¨ì´ì œì´ì…˜ë˜ë¯€ë¡œ, React ìºì‹œë¡œ ê°ìŒ€ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ fetch APIê°€ ì í•©í•˜ì§€ ì•Šì€ ì‚¬ìš© ì‚¬ë¡€ì— ëŒ€í•´ ë°ì´í„° ìš”ì²­ì„ ìˆ˜ë™ìœ¼ë¡œ ë©”ëª¨ì´ì œì´ì…˜í•˜ê¸° ìœ„í•´ ìºì‹œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¼ë¶€ ë°ì´í„°ë² ì´ìŠ¤ í´ë¼ì´ì–¸íŠ¸, CMS í´ë¼ì´ì–¸íŠ¸ ë˜ëŠ” GraphQL í´ë¼ì´ì–¸íŠ¸ ë“±ìž…ë‹ˆë‹¤.

ì¦‰, ì´ ê¸°ëŠ¥ì€ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ë°˜ë³µì ìœ¼ë¡œ í˜¸ì¶œí•´ì•¼ í•˜ëŠ” ê²½ìš°ì— ìœ ìš©í•˜ë©°, íŠ¹ížˆ ë°ì´í„° ìš”ì²­ê³¼ ê°™ì€ ë¹„ìš©ì´ ë§Žì´ ë“œëŠ” ìž‘ì—…ì„ ìµœì í™”í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ ìž¬ì‚¬ìš©í•˜ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

> ì¶œì²˜ : [React Cache Function](https://nextjs.org/docs/app/building-your-application/caching#react-cache-function)